<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator">
    <meta charset="utf-8">

    <title>Malina.js | API </title>
    <meta name="description" content>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- fonts -->
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Ubuntu:300,400,500,600,700" rel="stylesheet">

    <!-- stylesheets -->
    <link rel="stylesheet" href="./doc.css">
    <link rel="stylesheet" href="./pygments.css">

    <!-- favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">

  </head>
<body>

  <div class="doc-navigation">
      <nav class="doc-navbar">
        <a href="/docs/" class="doc-navbar__logo">
        <img src="./favicon-32x32.png" class="doc-navbar__logo__img">
        <span class="doc-navbar__logo__text">Malina.js</span>
        </a>
      </nav>
      <nav class="doc-sidebar">
        <div class="doc-sidebar-content">
            <ul class="doc-sidebar-list">

              <li class="doc-sidebar-list__item doc-sidebar-list__item--link">
                <a target="_blank" class="external" href="https://malinajs.github.io/repl/"><span><b>Try online [REPL]</b></span></a>
              </li>

              <li class="doc-sidebar-list__item doc-sidebar-list__item--link">             <a href="#expression-in-text"><span><b>Expression in text</b></span></a></li>
<li class="doc-sidebar-list__item doc-sidebar-list__item--link">             <a href="#bindings"><span><b>Bindings</b></span></a><ul class="doc-sidebar-list__toc-list">
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#reference" data-scroll="true">
                        <span>Reference</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#1-way-binding" data-scroll="true">
                        <span>1-way binding</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#2-way-binding" data-scroll="true">
                        <span>2-way binding</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#class-and-style" data-scroll="true">
                        <span>Class and Style</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#actions" data-scroll="true">
                        <span>Actions</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#insert-js" data-scroll="true">
                        <span>Insert JS</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#events" data-scroll="true">
                        <span>Events</span>
                      </a>
                    </li>
                </ul></li>
<li class="doc-sidebar-list__item doc-sidebar-list__item--link">             <a href="#control-blocks"><span><b>Control blocks</b></span></a><ul class="doc-sidebar-list__toc-list">
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#if-else" data-scroll="true">
                        <span>#if-else</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#each" data-scroll="true">
                        <span>#each</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#fragment" data-scroll="true">
                        <span>#fragment</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#await" data-scroll="true">
                        <span>#await</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#html" data-scroll="true">
                        <span>@html</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#portal" data-scroll="true">
                        <span>Portal</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#head-body-window" data-scroll="true">
                        <span>head / body / window</span>
                      </a>
                    </li>
                </ul></li>
<li class="doc-sidebar-list__item doc-sidebar-list__item--link">             <a href="#components"><span><b>Components</b></span></a><ul class="doc-sidebar-list__toc-list">
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#structure" data-scroll="true">
                        <span>Structure</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#properties-and-attributes" data-scroll="true">
                        <span>Properties and attributes</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#2-way-binding-2" data-scroll="true">
                        <span>2-way binding</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#events-2" data-scroll="true">
                        <span>Events</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#slots" data-scroll="true">
                        <span>Slots</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#call-child-fragment" data-scroll="true">
                        <span>Call child fragment</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#anchor" data-scroll="true">
                        <span>Anchor</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#dynamic-component" data-scroll="true">
                        <span>Dynamic component</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#passing-css-class" data-scroll="true">
                        <span>Passing CSS class</span>
                      </a>
                    </li>
                </ul></li>
<li class="doc-sidebar-list__item doc-sidebar-list__item--link">             <a href="#other"><span><b>Other</b></span></a><ul class="doc-sidebar-list__toc-list">
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#property" data-scroll="true">
                        <span>Property</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#onmount-ondestroy" data-scroll="true">
                        <span>onMount / onDestroy</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#turn-change-detector-off" data-scroll="true">
                        <span>Turn change-detector off</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#scoped-css" data-scroll="true">
                        <span>Scoped CSS</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#watch-expression-reactivity" data-scroll="true">
                        <span>Watch expression, reactivity</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#context" data-scroll="true">
                        <span>$context</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#error-handling" data-scroll="true">
                        <span>Error handling</span>
                      </a>
                    </li>
                
                    <li class="doc-sidebar-list__toc-item">
                      <a href="#compile-options" data-scroll="true">
                        <span>Compile options</span>
                      </a>
                    </li>
                </ul></li>
            </ul>
        </div>
      </nav>
  </div>

  <div class="doc-content">
    <div class="dc-page">
      <div class="dc-card">
        <div id="page-content" class="doc-formatting">
          <h1 id="expression-in-text">Expression in text</h1>

<div class="columns2"><div>

<p>You can bind JavaScript expression in html-template.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  {name}
  {getValue(&#39;title&#39;)}
  {a} + {b} = {a + b}
  {&#39;text with &quot;quotes&quot;&#39; + `123`}
  {`js template ${variable}`}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h1 id="bindings">Bindings</h1>

<h2 id="reference">Reference</h2>

<div class="columns2"><div>

<p>You can get reference to element/component using <code>#ref</code> and save it to a variable.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">let</span> <span class="nx">ref</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">component</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">input</span> <span class="err">#</span><span class="na">ref</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">Component</span> <span class="err">#</span><span class="na">component</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h2 id="1-way-binding">1-way binding</h2>

<div class="columns2"><div>

<p>For binding to attributes and properties you can write <code>attribute={value}</code>, if attribute and variable names the same you can use shortcut <code>{attribute}</code>, for binding you can use JavaScript expression.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">input</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;{value}&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">value</span><span class="o">=</span><span class="s">{value}</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="err">{</span><span class="na">value</span><span class="err">}</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">disabled</span><span class="o">=</span><span class="s">{!clickable}</span><span class="p">&gt;</span>Click<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>Also you can <em>spread</em> an object to attributes.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">let</span> <span class="nx">props</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;Hello&#39;</span><span class="p">,</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Some title&#39;</span>
  <span class="p">};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">input</span> <span class="err">{...</span><span class="na">props</span><span class="err">}</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h2 id="2-way-binding">2-way binding</h2>

<div class="columns2"><div>

<p>For 2-way binding you can use <code>bind:value={value}</code> or shortcut <code>:value={value}</code>, when property name the same as variable name you can omit it, e.g. <code>:value</code></p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">checked</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">:value</span><span class="o">=</span><span class="s">{name}</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">:checked</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h2 id="class-and-style">Class and Style</h2>

<div class="columns2"><div>

<p>To set class and style you can use <code>class:className={condition}</code>, <code>style:styleName={value}</code>.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class:blue</span><span class="o">=</span><span class="s">{value}</span> <span class="na">class:red</span><span class="o">=</span><span class="s">{!value}</span><span class="p">&gt;</span>by class name<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;{value?&#39;red&#39;:&#39;blue&#39;}&quot;</span><span class="p">&gt;</span>attribute class<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">b</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color: {value?&#39;green&#39;:&#39;red&#39;};&quot;</span><span class="p">&gt;</span>style as string<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">style:color</span><span class="o">=</span><span class="s">{color}</span>
  <span class="na">style:border-color</span><span class="o">=</span><span class="s">&quot;red&quot;</span>
  <span class="na">style:border</span><span class="o">=</span><span class="s">&quot;1px solid {color}&quot;</span><span class="p">&gt;</span>
    Style as prop/template
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>


<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">.</span><span class="nc">blue</span> <span class="p">{}</span><span class="o">;</span>
  <span class="p">.</span><span class="nc">red</span> <span class="p">{}</span><span class="o">;</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="actions">Actions</h2>

<div class="columns2"><div>

<p>You can run some JavaScript code on element, <code>use:action={param}</code> or shortcut <code>*action={param}</code>, without arguments it looks like <code>*action</code>.</p>

<p>Also you can run some JavaScript code where <code>$element</code> is available - <code>*{$element.focus()}</code>.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">function</span> <span class="nx">draw</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">draw</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="err">*{$</span><span class="na">element</span><span class="err">.</span><span class="na">focus</span><span class="err">()}</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>If you need more control you can pass arguments and subscribe for updates and destroy event.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">function</span> <span class="nx">draw</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">update</span><span class="o">:</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{},</span>
      <span class="nx">destroy</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">draw</span><span class="o">=</span><span class="s">{a,</span> <span class="na">b</span><span class="err">}</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="insert-js">Insert JS</h2>

<div class="columns2"><div>

<p>You can insert casual JS in template, a current DOM-node is available as <code>$element</code>.
<a href="https://malinajs.github.io/repl/#/gist/d6f930f4b47e7fed5335be83d692a423?version=0.6.36" target="_blank">example</a></p>

</div>

<div class="highlight"><pre><span></span><code>{* const name = &#39;random code&#39; }
<span class="p">&lt;</span><span class="nt">div</span> <span class="err">{*</span> <span class="err">$</span><span class="na">element</span><span class="err">.</span><span class="na">style</span><span class="err">.</span><span class="na">color </span><span class="o">=</span> <span class="s">&#39;red&#39;</span> <span class="err">}</span><span class="p">&gt;</span>
  {name}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="events">Events</h2>

<div class="columns2"><div>

<p>To listen events you can use <code>on:eventName={expression}</code> or shortcut <code>@eventName={expression}</code>.</p>

<p>For expression you can use function name <code>@click={handler}</code> or <code>@click:handler</code>, function declaration <code>@click={(e) =&gt; handler(e)}</code> or js-expression <code>@click={handler($event)}</code>.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kr">const</span> <span class="nx">click</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click</span><span class="p">&gt;</span>Click<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click:click</span><span class="p">&gt;</span>Click<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">{click}</span><span class="p">&gt;</span>Click<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">{(e)</span> <span class="err">=</span><span class="p">&gt;</span> click(e)}&gt;Click<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">{click($event,</span> <span class="err">$</span><span class="na">element</span><span class="err">)}</span><span class="p">&gt;</span>Click<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>Also you can use modificators for elements: <code>preventDefault</code> or <code>prevent</code>, <code>stopPropagation</code> or <code>stop</code>
for keyboard events: <code>enter</code>, <code>tab</code>, <code>esc</code>, <code>space</code>, <code>up</code>, <code>down</code>, <code>left</code>, <code>right</code>, <code>delete</code>,
meta keys: <code>ctrl</code>, <code>alt</code>, <code>shift</code>, <code>meta</code></p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="err">@</span><span class="na">keyup</span><span class="err">|</span><span class="na">enter:handler</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>Also you can forward events to a parent component, <code>@@eventName</code> to forward one type of event, <code>@@</code> to forward all events from current element, the same works for components.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">button</span> <span class="err">@@</span><span class="na">click</span><span class="p">&gt;</span>Click<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="err">@@</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">Component</span> <span class="err">@@</span><span class="na">click</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h1 id="control-blocks">Control blocks</h1>

<h2 id="if-else">#if-else</h2>

<div class="columns2"><div>

<p>Block of template can be rendered by condition.</p>

</div>

<div class="highlight"><pre><span></span><code>{#if condition}
  One content
{:else}
  Another content
{/if}
</code></pre></div>

</div>

<h2 id="each">#each</h2>

<div class="columns2"><div>

<p>Iterating over list, you can pass a key which lets to associate item with DOM element, by default key is chosen depends on content.
<a target="_blank" href="https://malinajs.github.io/repl/#/share/TSK8J7eijHo?version=0.6.36">example</a> shows difference depends of used key.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
  {#each items as item}
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>{item.name}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
  {/each}
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<p>Examples:</p>

<div class="highlight"><pre><span></span><code>{#each items as item}...{/each}
</code></pre></div>

<div class="highlight"><pre><span></span><code>{#each items as item, index}...{/each}
</code></pre></div>

<div class="highlight"><pre><span></span><code>{#each items as {id, name, key1, key2} }...{/each}
</code></pre></div>

<div class="highlight"><pre><span></span><code>{#each items as item, index (item.id)}...{/each}
</code></pre></div>

<div class="highlight"><pre><span></span><code>{#each items as item, index (index)}...{/each}
</code></pre></div>

<div class="highlight"><pre><span></span><code>{#each number as value}...{/each}
</code></pre></div>

<h2 id="fragment">#fragment</h2>

<div class="columns2"><div>

<p>You can declare some fragment to reuse it a few times other places. Also it can be declared anywhere, e.g. inside of the <code>#each</code>, so it will have all scoped variables.
<a target="_blank" href="https://malinajs.github.io/repl/#/share/QzoQntzlIxI?version=0.6.36">example</a></p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  {#fragment:button text}
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-sm-6 smallpad&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="err">@@</span><span class="na">click</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn&quot;</span><span class="p">&gt;</span>{text}<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  {/fragment}

  <span class="p">&lt;</span><span class="nt">fragment:button</span> <span class="na">text</span><span class="o">=</span><span class="s">&#39;Left&#39;</span> <span class="err">@</span><span class="na">click:left</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">fragment:button</span> <span class="na">text</span><span class="o">=</span><span class="s">&#39;Right&#39;</span> <span class="err">@</span><span class="na">click:right</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<p><br/>
Also you can call it recursively.</p>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">let</span> <span class="nx">tree</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;OS&#39;</span><span class="p">,</span>
    <span class="nx">children</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Linux&#39;</span><span class="p">,</span>
      <span class="nx">children</span><span class="o">:</span> <span class="p">[{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Ubuntu&#39;</span><span class="p">},</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Debian&#39;</span><span class="p">},</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;RedHat&#39;</span><span class="p">}]</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;MacOS X&#39;</span>
    <span class="p">}]</span>
  <span class="p">}];</span>

  <span class="kr">const</span> <span class="nx">click</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">)};</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">fragment:draw</span> <span class="na">list</span><span class="o">=</span><span class="s">{tree}</span><span class="p">&gt;</span>

{#fragment:draw list}
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    {#each list as it}
    <span class="p">&lt;</span><span class="nt">li</span> <span class="err">@</span><span class="na">click</span><span class="err">|</span><span class="na">stopPropagation</span><span class="o">=</span><span class="s">{click(it.name)}</span><span class="p">&gt;</span>
      {it.name}
      {#if it.children}
        <span class="p">&lt;</span><span class="nt">fragment:draw</span> <span class="na">list</span><span class="o">=</span><span class="s">{it.children}</span> <span class="p">/&gt;</span>
      {/if}
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    {/each}
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
{/fragment}
</code></pre></div>

<div class="columns2"><div>

<p>Also you can pass slot to fragment,
<a target="_blank" href="https://malinajs.github.io/repl/#/share/jgtdUmDtkJK?version=0.6.36">example</a></p>

</div>

<div class="highlight"><pre><span></span><code>{#fragment:field}
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;field&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">slot</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
{/fragment}

<span class="p">&lt;</span><span class="nt">fragment:field</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>Click<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">fragment</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">fragment:field</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">fragment</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="await">#await</h2>

<div class="columns2"><div>

<p>You can await a promise to display placeholder etc.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
{#await promise}
  Loading...
{:then value}
  Data: {value}
{:catch error}
  Loading error: {error}
{/await}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<p>Possible options:</p>

<div class="highlight"><pre><span></span><code>{#await expression}...{:then name}...{:catch name}...{/await}
</code></pre></div>

<div class="highlight"><pre><span></span><code>{#await expression}...{:then name}...{/await}
</code></pre></div>

<div class="highlight"><pre><span></span><code>{#await expression then name}...{/await}
</code></pre></div>

<h2 id="html">@html</h2>

<div class="columns2"><div>

<p>To render some HTML, you can use <code>{@html expression}</code>.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
  {@html post.content}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h3 id="portal">Portal</h3>

<div class="columns2"><div>

<p>Portal lets you render a template outside of component, argument <code>mount</code> == 'document.body' by default.
<a target="_blank" href="https://malinajs.github.io/repl/#/share/EQIPLZrARiM?version=0.6.36">example</a></p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">malina:portal</span> <span class="na">mount</span><span class="o">=</span><span class="s">{document.body}</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;popup&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Popup<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Some text<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">malina:portal</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="head-body-window">head / body / window</h2>

<div class="columns2"><div>

<p>These special elements lets you handle head/body/window:
<a target="_blank" href="https://malinajs.github.io/repl/#/share/EG0Q_RI2cfo?version=0.6.36">example</a></p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">malina:head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Set title<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;theme.css&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">malina:head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">malina:body</span> <span class="err">@</span><span class="na">keydown</span><span class="err">|</span><span class="na">esc:escape</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">malina:window</span> <span class="err">@</span><span class="na">scroll</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h1 id="components">Components</h1>

<h2 id="structure">Structure</h2>

<div class="columns2"><div>

<p>A component can have script block, style block and rest content becomes a template</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

... content ...

<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="o">...</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>You can import a component <code>import Component from './Component.html'</code>, and use it in template as <code>&lt;Component /&gt;</code>, a component should start with capital letter.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kr">import</span> <span class="nx">Component</span> <span class="nx">from</span> <span class="s1">&#39;./Component.html&#39;</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">Component</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h2 id="properties-and-attributes">Properties and attributes</h2>

<div class="columns2"><div>

<p>You can pass some arguments into a component, it's a 1-way binding.</p>

<p>Also you can spread an object to pass all values as arguments.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">Component</span> <span class="na">value</span><span class="o">=</span><span class="s">{expression}</span> <span class="err">{</span><span class="na">name</span><span class="err">}</span> <span class="err">{...</span><span class="na">obj</span><span class="err">}</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>You can use keyword <code>export</code> to mark a variable as property, so it will receive a value from parent component and will be updated on changes.</p>

<p>A parent can pass more arguments than number of props in a component, so all arguments will be available in <code>$props</code>, and all arguments which are not property are in <code>$attributes</code>.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kr">export</span> <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">;</span>

  <span class="nx">$props</span>
  <span class="nx">$attributes</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">input</span> <span class="err">{...$</span><span class="na">props</span><span class="err">}</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="err">{...$</span><span class="na">attributes</span><span class="err">}</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h2 id="2-way-binding-2">2-way binding</h2>

<div class="columns2"><div>

<p>Syntax for 2-way binding is the same as for elements.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">Component</span> <span class="na">:value</span><span class="o">=</span><span class="s">{variable}</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h2 id="events-2">Events</h2>

<div class="columns2"><div>

<p>It's possible to listen an event, forward an event and forward all events. Syntax for events is the same as for elements.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">Component</span> <span class="err">@</span><span class="na">click:handler</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>Also you can emit an custom event, for this you can use a built function <code>$emit(eventName, details)</code>.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;myevent&#39;</span><span class="p">,</span> <span class="s1">&#39;info&#39;</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="slots">Slots</h2>

<div class="columns2"><div>

<p>You can pass slots to a child component. To pass a default slot:</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">Child</span><span class="p">&gt;</span>
  Some content
<span class="p">&lt;/</span><span class="nt">Child</span><span class="p">&gt;</span>

<span class="c">&lt;!-- Child.html --&gt;</span>
<span class="p">&lt;</span><span class="nt">slot</span><span class="p">&gt;</span>No content<span class="p">&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>To pass named slots:</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">Child</span><span class="p">&gt;</span>
  {#slot:title}
    Some title
  {/slot}

  Some content

  {#slot:footer}
    Some footer
  {/slot}
<span class="p">&lt;/</span><span class="nt">Child</span><span class="p">&gt;</span>

<span class="c">&lt;!-- Child.html --&gt;</span>

<span class="p">&lt;</span><span class="nt">slot</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">slot</span><span class="p">&gt;</span>No content<span class="p">&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">slot:title</span><span class="p">&gt;</span>No title<span class="p">&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">slot:footer</span><span class="p">&gt;</span>No title<span class="p">&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span> or <span class="p">&lt;</span><span class="nt">slot:footer</span><span class="p">&gt;</span>No title<span class="p">&lt;/</span><span class="nt">slot:footer</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>A child component can pass a property to parent slot:</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">Child</span><span class="p">&gt;</span>
  {#slot prop}
    Some content {prop.value} {parentVar}
  {/slot}
<span class="p">&lt;/</span><span class="nt">Child</span><span class="p">&gt;</span>

<span class="c">&lt;!-- Child.html --&gt;</span>

{#each items as item}
  <span class="p">&lt;</span><span class="nt">slot</span> <span class="na">prop</span><span class="o">=</span><span class="s">{item}</span><span class="p">&gt;</span>No content {childVar}<span class="p">&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
{/each}
</code></pre></div>

</div>

<h2 id="call-child-fragment">Call child fragment</h2>

<div class="columns2"><div>

<p>You can call a fragment from child component, it looks like inverted slot,
<a target="_blank" href="https://malinajs.github.io/repl/#/share/e5n7BjROYSA?version=0.6.34">example</a></p>

</div>

<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- Child --&gt;</span>
{#fragment:title export}
  <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;header&quot;</span><span class="p">&gt;</span>{name}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
{/fragment}

<span class="c">&lt;!-- App --&gt;</span>
<span class="p">&lt;</span><span class="nt">Child</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Child:title</span><span class="p">&gt;</span>Header<span class="err">&lt;</span>/&gt;
<span class="p">&lt;/</span><span class="nt">Child</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="anchor">Anchor</h2>

<div class="columns2"><div>

<p>It lets you pass controls (classes, events, actions etc) without template to child component.
<a target="_blank" href="https://malinajs.github.io/repl/#/gist/2824bcb54eab5f9b4dded54c59298944?version=0.6.36">example</a></p>

</div>

<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- App --&gt;</span>
<span class="p">&lt;</span><span class="nt">Child</span><span class="p">&gt;</span>
  <span class="err">&lt;</span>^root class=&quot;border&quot; /&gt;
  <span class="err">&lt;</span>^name style=&quot;font-weight: bold; color: red&quot; /&gt;
  <span class="err">&lt;</span>^input type=&quot;text&quot; *action :value /&gt;
<span class="p">&lt;/</span><span class="nt">Child</span><span class="p">&gt;</span>

<span class="c">&lt;!-- Child --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="err">^</span><span class="na">root</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="err">^</span><span class="na">name</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="err">^</span><span class="na">input</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="dynamic-component">Dynamic component</h2>

<div class="columns2"><div>

<p>Dynamic component let you to attach a component from variable/expression.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kr">import</span> <span class="nx">Music</span> <span class="nx">from</span> <span class="s1">&#39;./Music.xht&#39;</span><span class="p">;</span>
  <span class="kr">import</span> <span class="nx">Movie</span> <span class="nx">from</span> <span class="s1">&#39;./Movie.xht&#39;</span><span class="p">;</span>

  <span class="kd">let</span> <span class="nx">comp</span><span class="p">,</span> <span class="nx">x</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">toggle</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">comp</span> <span class="o">=</span> <span class="nx">comp</span> <span class="o">==</span> <span class="nx">Music</span> <span class="o">?</span> <span class="nx">Movie</span> <span class="o">:</span> <span class="nx">Music</span><span class="p">;</span>
    <span class="nx">x</span> <span class="o">^=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">component:comp</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">component:</span><span class="err">{</span><span class="na">x</span> <span class="err">?</span> <span class="na">Music</span> <span class="na">:</span> <span class="na">Movie</span><span class="err">}</span> <span class="p">/&gt;</span>

<span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click:toggle</span><span class="p">&gt;</span>Switch<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="passing-css-class">Passing CSS class</h2>

<p>You can pass classes into child components using property <code>class</code>, to be able to use it in child class you have to place such classes in <code>external</code> block.
<a target="_blank" href="https://malinajs.github.io/repl/#/gist/065441c1187bfd9ce5f0117b7dbd97f6?version=0.6.36">example</a>, 
<a target="_blank" href="https://malinajs.github.io/repl/#/gist/410bb2c1406ea412ad4b4e75616d9581?version=0.6.36">example2</a></p>

<div class="columns2"><div>

<p><strong>Syntax</strong>: <code>class:childClassName="parentClass globalClass"</code></p>

<p>In the example, classes <code>red italic</code> is passed as class <code>font</code> in child component. If class is not passed default styles will be used.</p>

<p>You can pass scoped classes, global classes and use expressions, e.g. <code>class:font="italic {color}"</code></p>

</div>

<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- App --&gt;</span>
<span class="p">&lt;</span><span class="nt">Child</span> <span class="na">class:font</span><span class="o">=</span><span class="s">&quot;red italic&quot;</span> <span class="p">/&gt;</span>

<span class="c">&lt;!-- Child --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;font&quot;</span><span class="p">&gt;</span>Child<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">external</span><span class="p">&gt;</span>
  <span class="p">.</span><span class="nc">font</span> <span class="p">{</span><span class="k">color</span><span class="p">:</span> <span class="kc">blue</span><span class="p">;}</span>  <span class="c">/* style by default */</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>Default class name for child component is <code>main</code>, and you can define it.</p>

<ul>
<li>Also you can pass partly global classes (e.g. <code>.button :global(.title)</code>)</li>
<li>Passing pseudo-classes (:hover etc)</li>
<li>Forward a class further</li>
</ul>

</div>

<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- App --&gt;</span>
<span class="p">&lt;</span><span class="nt">Child</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;red italic&quot;</span> <span class="p">/&gt;</span>

<span class="c">&lt;!-- Child --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;main&quot;</span><span class="p">&gt;</span>Child<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span> <span class="na">external</span> <span class="na">main</span><span class="o">=</span><span class="s">&quot;main&quot;</span><span class="p">&gt;</span>
  <span class="p">.</span><span class="nc">main</span> <span class="p">{</span><span class="k">color</span><span class="p">:</span> <span class="kc">blue</span><span class="p">;}</span>  <span class="c">/* style by default */</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>If class name starts with <code>$</code> is's marked as extrenal
<a target="_blank" href="https://malinajs.github.io/repl/#/share/0O8PvtvEW37?version=0.6.36">example</a></p>

</div>

<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- App --&gt;</span>
<span class="p">&lt;</span><span class="nt">Child</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;red italic&quot;</span> <span class="p">/&gt;</span>

<span class="c">&lt;!-- Child --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;$main&quot;</span><span class="p">&gt;</span>Child<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h1 id="other">Other</h1>

<h2 id="property">Property</h2>

<div class="columns2"><div>

<p>If you have an instance of component, you can read/write properties directly, a component should have attribute <code>property</code>.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- Component --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">property</span><span class="p">&gt;</span>
  <span class="kr">export</span> <span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="c">&lt;!-- App --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kr">import</span> <span class="nx">Component</span> <span class="nx">from</span> <span class="s1">&#39;./Component.html&#39;</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">comp</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">increment</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">comp</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Component</span> <span class="err">#</span><span class="na">comp</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h2 id="onmount-ondestroy">onMount / onDestroy</h2>

<div class="columns2"><div>

<p>If you need to perform some code after mounting or during destroying a component, you can use declare functions <code>onMount</code>, <code>onDestroy</code>, or use a built function <code>$onMount(fn)</code>, <code>$onDestroy(fn)</code>.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="nx">called_at_start</span><span class="p">();</span>

  <span class="kd">function</span> <span class="nx">onMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// called after mounting</span>

    <span class="nx">$onDestroy</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{...});</span>  <span class="c1">// subscribe on destroying</span>
    <span class="nx">$onDestroy</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{...});</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">onDestroy</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// called during destroying</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">Component</span> <span class="err">#</span><span class="na">comp</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h2 id="turn-change-detector-off">Turn change-detector off</h2>

<div class="columns2"><div>

<p>In some cases you can turn off change detection, e.g. if a component doesn't expect changes, like component "Icon":</p>

<ul>
<li>If to set attribute <code>read-only</code> on script tag, change-detector will be off for this component.</li>
<li>If you <code>export const name</code> instead <code>export let name</code>, then some runtime will be omitted for such property.</li>
<li>Keyword <code>!no-check</code> in comment tells compiler to skips such js-block for "detections".</li>
</ul>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">read-only</span><span class="p">&gt;</span>
  <span class="kr">export</span> <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// !no-check</span>
    <span class="p">...</span> <span class="nx">some</span> <span class="nx">not</span> <span class="nx">detected</span> <span class="nx">code</span> <span class="p">...</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="scoped-css">Scoped CSS</h2>

<div class="columns2"><div>

<p>Malina.js makes all styles are scoped for a component, it appends a prefix class to styles and elements from template based on selector, so only required elements are marked.</p>

<p>Using keyword <code>:global()</code> you make certain style as global.</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="nt">span</span> <span class="p">{</span>
    <span class="c">/* all &lt;span&gt; elements, only from</span>
<span class="c">    current component will be affected */</span>
  <span class="p">}</span>
  <span class="p">:</span><span class="nd">global</span><span class="o">(</span><span class="nt">body</span><span class="o">)</span> <span class="p">{</span>
    <span class="c">/* effects on &lt;body&gt; */</span>
  <span class="p">}</span>
  <span class="nt">div</span> <span class="p">:</span><span class="nd">global</span><span class="o">(</span><span class="nt">span</span><span class="o">)</span> <span class="p">{</span>
    <span class="c">/* effects on all &lt;span&gt; elements</span>
<span class="c">    (including child components)</span>
<span class="c">    inside of &lt;div&gt; from current component */</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<div class="columns2"><div>

<p>Also you can mark whole style-block as global</p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">style</span> <span class="na">global</span><span class="p">&gt;</span>
  <span class="nt">span</span> <span class="p">{</span> <span class="c">/* ... */</span> <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></div>

</div>

<h2 id="watch-expression-reactivity">Watch expression, reactivity</h2>

<div class="columns2"><div>

<p>Using syntax <code>$:</code> you can observe changes.</p>

<p>Computed value: <code>$: value = a + b</code>, <code>value</code> will be changed when an expression gives another result.</p>

<p>To observe changes in expression and call handler: <code>$: exp, handler()</code>.
It can contain a few expressions: <code>$: exp1, exp2, a+b, handler()</code>.</p>

<p>Handler also can be link to function or statement: <code>$: exp, (newValue) =&gt; console.log(newValue);</code> or
<code>$: exp, console.log(exp)</code> or <code>$: exp, handler</code></p>

</div>

<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">let</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="nx">$</span><span class="o">:</span> <span class="nx">header</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="nx">$</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
  <span class="nx">$</span><span class="o">:</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">onChangeSum</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">:value</span><span class="o">=</span><span class="s">{name}</span> <span class="p">/&gt;</span>
</code></pre></div>

</div>

<h2 id="context">$context</h2>

<div class="columns2"><div>

<p>An arbitrary context object of a component, a content is available in child components. For external libs it must be imported from "malinajs" and used during component initialisation.
<a target="_blank" href="https://malinajs.github.io/repl/#/share/NeIq-KUQnTD?version=0.6.36">example</a></p>

</div>

<div class="highlight"><pre><span></span><code><span class="c1">// App.xht</span>
<span class="nx">$context</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;Test&#39;</span><span class="p">;</span>

<span class="c1">// Child.xht</span>
<span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

<span class="c1">// lib.js</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">$context</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;malinajs&#39;</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</code></pre></div>

</div>

<h2 id="error-handling">Error handling</h2>

<div class="columns2"><div>

<p>Errors which can't be caught by try-catch is handled by Malina.js and displayed to console, but you can override it.
<a target="_blank" href="https://malinajs.github.io/repl/#/share/b-V7WaMo4iC?version=0.6.36">example</a></p>

</div>

<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="p">{</span><span class="nx">configure</span><span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;malinajs/runtime.js&quot;</span><span class="p">;</span>
<span class="nx">configure</span><span class="p">({</span>
  <span class="nx">onerror</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">e</span><span class="p">)}</span>
<span class="p">}</span>
</code></pre></div>

</div>

<h2 id="compile-options">Compile options</h2>

<ul>
<li>warning - (function) to receive warnings</li>
<li>inlineTemplate - (true/false) convert new line to \n</li>
<li>hideLabel - (true/false) hide comment tags (labels) from DOM</li>
<li>compact - (true/false) remove spaces between DOM elements</li>
<li>autoSubscribe - (true/false) autosubscribe imported stores</li>
<li>cssGenId - (function) generate hash for css classes</li>
<li>debugLabel - (true/false) adds info label nodes</li>
<li>css - (true/false/function) controls how to handle CSS, true - adds css to JS bundle, false - into outside css file, function - intercepts css for manual handling</li>
<li>passClass - (true/false) passing classes to child component, it's true by default.</li>
<li>immutable - (true/false) if true it doesn't perform deep comparison of objects</li>
</ul>

        </div>
      </div>
    </div>
  </div>

  </body>
</html>
